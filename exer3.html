<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Gamedev Canvas Workshop</title>
    <style>
    	* { padding: 0; margin: 0; }
    	canvas { background: #eee; display: block; margin: 0 auto; }
    </style>
</head>
<body>

<canvas id="myCanvas" width="480" height="320"></canvas>

<script>
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");
var rectWidth = 10;
var rectHeight = 15;
var x = canvas.width/2 - 50;
var y = canvas.height-30;
var dx = 0;
var dy = -1;
var rightPressed = false;
var leftPressed = false;
var paddleHeight = 10;
var paddleWidth = 75;
var brickSpeed = 0.5;
var paddleCount = 12;
var paddleX =  getRandomArbitrary(0,canvas.width - paddleWidth);
var paddleY = (canvas.height-paddleHeight) / 2;	

var up = true;
var down = false;

var jumpHeight = -1000;
var paddleSpeed = 1;

var paddles = [];
for(var c=0; c<paddleCount; c++) {
    paddles[c] = { x: 0, y: 0, status: 0, moveStatus: false};}

function drawRect() {
    ctx.beginPath();
    ctx.rect(x, y, rectWidth, rectHeight);
    ctx.fillStyle = "#0095DD";
    ctx.fill();
    ctx.closePath();
}

function getRandomArbitrary(min, max) {
  return Math.random() * (max - min) + min;
}

function drawPaddleName(pointX,pointY,number) {
    ctx.font = "16px Arial";
    ctx.fillStyle = "#009555";
    ctx.fillText("Number"+number,pointX , pointY);
}
function drawStatus(pointX,pointY,text) {
    ctx.font = "16px Arial";
    ctx.fillStyle = "#FFFFFF";
    ctx.fillText(text,pointX , pointY);
}

function drawPaddle(x,y,width,height) {
    ctx.beginPath();
    ctx.rect(x, y, width, height);
    ctx.fillStyle = "#0095DD";
    ctx.fill();
    ctx.closePath();
}

function movePaddle(){
    for (var c = 0;c < paddleCount; c++){
        var p = paddles[c];
        if(p.status == 0){
            p.status = 1;
            p.moveStatus = false;
            if(c < 3){
                paddleX =  c * paddleWidth;
                paddleY =  -150;//c * 20;//getRandomArbitrary(0,10);
            }
            else if(c > 2 && c < 6) {
                paddleX = (c-3) * paddleWidth; 
                paddleY =  0;//getRandomArbitrary(10,100);
            }
            else if (c > 5 && c < 9){
                paddleX = (c-6) * paddleWidth; 
                paddleY =  150;//getRandomArbitrary(10,100);
            }
            else{
                paddleX = (c-9) * paddleWidth; 
                paddleY =  300;//getRandomArbitrary(10,100);
            }
            p.x = paddleX;
            p.y = paddleY;
            drawPaddle(paddleX,paddleY,paddleWidth,paddleHeight);
            drawPaddleName(paddleX,paddleY,c);
            drawStatus(paddleX + paddleWidth / 2,paddleY+paddleHeight,p.moveStatus );
        }
        else{ 
            paddleX =  p.x;
            if(p.moveStatus == true){
	            p.y += 1;    
            } 
            paddleY =  p.y ;
            if (paddleY + paddleHeight > canvas.height  ) {
	            p.status = 0;
	            //bricks[c].x = 0;
	            //p.y = -150;
	        } 
            drawPaddle(paddleX,paddleY,paddleWidth,paddleHeight);
            drawPaddleName(paddleX,paddleY,c);
            drawStatus(paddleX + paddleWidth / 2,paddleY+paddleHeight,p.moveStatus );
        }
    }

}

function moveDetection(){
for(var c=0; c<paddleCount; c++) {
	  var b = paddles[c];
	   if(y + dy + rectHeight  > b.y  && y + dy + rectHeight  < b.y + paddleHeight  && x > b.x && x < b.x + paddleWidth && dy > 0 ) {
	     y  = b.y - rectHeight;
		dy = 1;
		dy = -dy * 1.9;}      
	if (y + dy <= b.y - 200 )//if (y +  rectHeight <=  b.y - rectHeight * 5   )
		{
			dy = -dy / 1.5;
		}
}
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawRect();
    movePaddle();

    if (y + dy < 200 /*|| y + dy < -20  */) { //top point
        //dy = -dy ;  // the fall
        //paddleSpeed = 1;
        dy = 0;
        for (var num  in paddles){
            paddles[num].moveStatus =true;
        }
    }   
    if (y + dy > canvas.height - rectHeight && down != false) {  //bottom point
	dy = -1;
    }  
     
    
    y += dy ;
    //moveDetection();
    if(rightPressed) {
    x += 5;
    if (x + paddleWidth > canvas.width){
        x = canvas.width - paddleWidth;
    }
}
else if(leftPressed) {
    x -= 5;
    if (x < 0){
        x = 0;
    }
}
}

document.addEventListener("keydown", keyDownHandler, false);
document.addEventListener("keyup", keyUpHandler, false);

function keyDownHandler(e) {
    if(e.key == "Right" || e.key == "ArrowRight") {
        rightPressed = true;
    }
    else if(e.key == "Left" || e.key == "ArrowLeft") {
        leftPressed = true;
    }
}

function keyUpHandler(e) {
    if(e.key == "Right" || e.key == "ArrowRight") {
        rightPressed = false;
    }
    else if(e.key == "Left" || e.key == "ArrowLeft") {
        leftPressed = false;
    }
}

setInterval(draw, 10);

</script>

</body>
</html>